- content_for :head do
  = javascript_include_tag "wall"

#detail_dialog
  #preview

#container.hidden
  ul
    - @clips.each do |clip|
      li.box id="clip_#{clip.id}"
        .image_box
          = link_to image_tag(clip.url, alt: clip.title, style: clip.thumb_size_for_style_sheet), clip
          .status
            p.tag
              - if clip.tags.count.nonzero?
                span = "##{clip.tags.last.shortname}"
              - else
                span タグなし
            p.like
              - if user_signed_in? && current_user.unlike?(clip)
                = like_to clip
              - else
                = unlike_to clip

        - if clip.title.present?
          p.title = link_to clip.title, clip

        .info
          - if clip.likes.count.nonzero?
            p.like
              - if user_signed_in? && current_user.unlike?(clip)
                = like_to clip
              - else
                = unlike_to clip

          - if clip.image_master.likes.count.nonzero?
            p.we_like
              i.icon-group title="みんなのイイネ！"
              = clip.image_master.likes.count

          - if false
            - if clip.comments.present?
              p.comment_count
                i.icon-comment-alt title="コメント数"
                = clip.comments.size

          - reclip_count = Clip.where(image_master_id: clip.image_master_id).count
          - if reclip_count.nonzero?
            p.reclip_count
              i.icon-paper-clip title="リクリップ数"
              = reclip_count

          - if clip.view_count.nonzero?
            p.view_count
              i.icon-eye-open title="閲覧数"
              = clip.view_count

        .comment_feild
          - if clip.comments.count.nonzero?
            ul class="comments#{' signed_in' if user_signed_in?}"
              - clip.comments.limit(Settings.maximum_comment_count).each do |comment|
                - if user_signed_in? && current_user.id == comment.user_id
                    li id="comment_#{comment.id}" = uncomment_to comment
                - else
                    li id="comment_#{comment.id}" = comment_to comment

          - if user_signed_in?
            = form_for Comment.new, url: { controller: :clips, action: :comment, id: clip.id }, remote: true, html: { id: "comment_form_#{clip.id}" } do |form|
              = form.text_field :body, placeholder: 'コメントする'
              = form.submit 'クリップ', class: 'hidden btn'

  #page-nav
    = link_to 'next', page: @clips.next_page if @clips.respond_to?(:next_page) && @clips.next_page.present?
